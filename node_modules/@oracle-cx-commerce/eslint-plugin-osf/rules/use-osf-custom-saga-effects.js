/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

module.exports = {
  meta: {
    type: 'suggestion',
    messages: {
      noEffectImportsThatAreNotOCCVersion: "@oracle-cx-commerce/store/utils provides custom effect '{{importName}}'."
    }
  },

  create: context => ({
    ImportSpecifier(node) {
      const {imported, parent} = node;

      const effectsProvidedByStoreUtils = ['takeEvery', 'takeLatest', 'takeLeading', 'takeOnce'];
      if (
        parent.type === 'ImportDeclaration' &&
        parent.source.value === 'redux-saga/effects' &&
        effectsProvidedByStoreUtils.includes(imported.name)
      ) {
        context.report({
          node,
          messageId: 'noEffectImportsThatAreNotOCCVersion',
          data: {
            importName: imported.name
          }
        });
      }
    }
  })
};
