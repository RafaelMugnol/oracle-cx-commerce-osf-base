/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

const {RuleTester} = require('eslint');
const rule = require('../../rules/use-osf-custom-saga-effects');

const ruleTester = new RuleTester({parserOptions: {ecmaVersion: 2015, sourceType: 'module'}});

/**
 * Disabling until compatibility between ESlint 8 and Jest v26 (v27) is resolved
 * https://github.com/eslint/eslint/issues/14936
 */

xdescribe('Eslint custom OSF plugin tests - redux saga import rule ', () => {
  ruleTester.run('Single import should result in single error.', rule, {
    valid: ["import {takeLatest} from '@oracle-cx-commerce/store/utils'"],
    invalid: [
      {
        code: "import {takeLatest} from 'redux-saga/effects'",
        errors: [
          {
            messageId: 'noEffectImportsThatAreNotOCCVersion',
            type: 'ImportSpecifier'
          }
        ]
      }
    ]
  });

  ruleTester.run('Multiple imports should result in multiple errors.', rule, {
    valid: ["import {takeLatest, takeLeading} from '@oracle-cx-commerce/store/utils'"],
    invalid: [
      {
        code: "import {select, takeLatest, takeLeading} from 'redux-saga/effects'",
        errors: [
          {
            messageId: 'noEffectImportsThatAreNotOCCVersion',
            type: 'ImportSpecifier'
          },
          {
            messageId: 'noEffectImportsThatAreNotOCCVersion',
            type: 'ImportSpecifier'
          }
        ]
      }
    ]
  });
});
