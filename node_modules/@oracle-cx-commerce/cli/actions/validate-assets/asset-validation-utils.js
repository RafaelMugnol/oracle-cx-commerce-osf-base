/*
 ** Copyright (c) 2021 Oracle and/or its affiliates.
 */
const path = require('path');
const fs = require('fs-extra');

const isAppJsonPresent = appDir => {
  const pathToAppJson = path.join(appDir, '.occ', 'app.json');

  return fs.existsSync(pathToAppJson);
};

/**
 * Temporary Function to get all Base Components information
 * @param {String} appDir path to application directory
 * @returns {Object[]} of base components objects
 */
function getAppJsonComponents(appDir) {
  const pathToAppJson = path.join(appDir, '.occ', 'app.json');
  const appJsonContent = fs.readFileSync(pathToAppJson, 'utf-8');
  const parsedAppJsonContent = JSON.parse(appJsonContent);

  const {components} = parsedAppJsonContent;

  return components;
}

module.exports = {
  isAppJsonPresent,
  getAppJsonComponents
};
