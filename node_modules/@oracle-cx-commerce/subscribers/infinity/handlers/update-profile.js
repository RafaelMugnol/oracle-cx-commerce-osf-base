/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {getCurrentProfileId} from '@oracle-cx-commerce/commerce-utils/selector';
import {postToInfinity} from '@oracle-cx-commerce/subscribers/infinity/utils';

export default (action, state) => {
  const {type} = action;
  if (type === 'updateProfileResolved') {
    const inputMap = {};
    [inputMap['page-uri']] = encodeURI(window.location).split('?');
    inputMap['wt.dcsvid'] = getCurrentProfileId(state);
    inputMap['wt.cg_n'] = 'User Profile';
    inputMap['wt.si_p'] = 'Update Successful';

    postToInfinity(inputMap);
  } else if (type === 'updateProfile') {
    const inputMap = {};
    [inputMap['page-uri']] = encodeURI(window.location).split('?');
    inputMap['wt.dcsvid'] = getCurrentProfileId(state);
    inputMap['wt.cg_n'] = 'User Profile';
    inputMap['wt.si_p'] = 'Update Submit';

    postToInfinity(inputMap);
  }
};
