/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {createOceEndpoint} from '../factory';

describe(`Test OCE endpoint factory`, function () {
  test('createOceEndpoint is a function', () => {
    expect(typeof createOceEndpoint).toBe('function');
  });

  test('createOceEndpoint("testService") creates and endpoint with correct api', () => {
    const endpoint = createOceEndpoint('testService');

    expect(Object.keys(endpoint).length).toBe(3);

    expect(endpoint.endpointId).toBe('testService');

    expect(typeof endpoint.getRequest).toBe('function');

    expect(typeof endpoint.getResponse).toBe('function');
  });

  test('createOceEndpoint("testService").getRequest() throws an error', async () => {
    const endpoint = createOceEndpoint('testService');

    await expect(endpoint.getRequest()).rejects.toThrow();
  });
});
