/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import * as endpoints from '../index';

for (const [endpointId, importEndpoint] of Object.entries(endpoints)) {
  if (endpointId === '__esModule') {
    continue;
  }

  test(`${endpointId}() dynamically imports an endpoint`, async () => {
    const endpoint = (await importEndpoint()).default;

    expect(typeof endpoint).toBe('object');
    expect(typeof endpoint.getRequest).toBe('function');
    expect(typeof endpoint.getResponse).toBe('function');
  });

  test(`${endpointId}().getRequest() throws an exception`, async () => {
    const endpoint = (await importEndpoint()).default;

    await expect(endpoint.getRequest()).rejects.toThrow();
  });

  test(`${endpointId}().getResponse() throws an exception`, async () => {
    const endpoint = (await importEndpoint()).default;

    expect(() => endpoint.getResponse()).toThrow();
  });
}
