/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {useEffect} from 'react';
import fetchPaymentConfigurations from '@oracle-cx-commerce/fetchers/payments/fetch-payment-configurations';
import {getPaymentConfigurations} from '@oracle-cx-commerce/commerce-utils/selector';
import {isEmptyObject} from '@oracle-cx-commerce/utils/generic';

/*
 * Hook for using fetchPaymentConfigurations fetcher
 */
export default store =>
  useEffect(() => {
    const paymentConfiguration = getPaymentConfigurations(store.getState());

    if (isEmptyObject(paymentConfiguration)) {
      // Fetch payment configuration if not already present in the state
      fetchPaymentConfigurations(store);
    }
  }, [store]);
