/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {useEffect} from 'react';
import {fetchReturnReasons} from '@oracle-cx-commerce/fetchers/merchant-settings';
import {getMerchantSettings} from '@oracle-cx-commerce/commerce-utils/selector';

export default store => {
  return useEffect(() => {
    // if returnReasons is undefined, it means the fetcher didn't run
    // and client side rendering is needed.
    // else server side rendering is executed.
    const {returnReasons} = getMerchantSettings(store.getState());
    if (returnReasons === null || returnReasons === undefined) {
      fetchReturnReasons(store);
    }
  }, [store]);
};
