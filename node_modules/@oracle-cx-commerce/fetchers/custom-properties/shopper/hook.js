/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {useEffect} from 'react';
import {fetchShopperCustomProperties} from '@oracle-cx-commerce/fetchers/custom-properties';
import {profileCustomPropertiesExistById} from '@oracle-cx-commerce/commerce-utils/selector';

export default store =>
  // invoke fetcher if server-side rendering isn't executed
  useEffect(() => {
    if (!profileCustomPropertiesExistById(store.getState(), 'user')) {
      fetchShopperCustomProperties(store);
    }
  }, [store]);
