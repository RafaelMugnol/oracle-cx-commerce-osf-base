/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {useEffect} from 'react';
import {getCurrentProduct} from '@oracle-cx-commerce/commerce-utils/selector';
import {isEmptyObject} from '@oracle-cx-commerce/utils/generic';
import fetchCurrentProductDetails from '@oracle-cx-commerce/fetchers/product/fetch-current-product-details';

/*
 * Hook for using fetchCurrentProductDetails fetcher
 */
export default store =>
  useEffect(() => {
    if (isEmptyObject(getCurrentProduct(store.getState()))) {
      fetchCurrentProductDetails(store);
    }
  }, [store]);
