/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {
  getCurrentOrder,
  getCurrentSiteId,
  getLocationIdsForQuery,
  getLocationRepository,
  getProduct,
  getSku
} from '@oracle-cx-commerce/commerce-utils/selector';
import {useSelector} from '@oracle-cx-commerce/react-components/provider';

export const useComponentData = (productId, skuId) => {
  // selectors
  const {shippingGroups = []} = useSelector(getCurrentOrder);

  const {
    onlineOnly: onlineOnlyProduct,
    configurable: configurableProduct,
    orderLimit
  } = useSelector(getProduct, {
    productId
  });
  const {onlineOnly: onlineOnlySku, configurable: configurableSku} = useSelector(getSku, {skuId});

  const currentSiteId = useSelector(getCurrentSiteId);
  const locationIdsForQuery = useSelector(getLocationIdsForQuery);
  const {locations} = useSelector(getLocationRepository);

  return {
    currentSiteId,
    locationIdsForQuery,
    locations,
    shippingGroups,
    configurableProduct,
    configurableSku,
    onlineOnlyProduct,
    onlineOnlySku,
    orderLimit
  };
};
