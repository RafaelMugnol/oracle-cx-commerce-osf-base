/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import React from 'react';
import Styled from '@oracle-cx-commerce/react-components/styled';
import PanelColumn from '@oracle-cx-commerce/react-widgets/product/product-configure/components/panel-column';
import css from '@oracle-cx-commerce/react-widgets/product/product-configure/components/panel-row/styles.css';
import PropTypes from 'prop-types';

/**
 * This component will render a panel-row UI component.
 *
 * @param {Object} props.component
 *   The component to be processed. This will be passed from the parent component.
 * @param {Array} props.columnWidths
 *   The list of widths to be used for each panel-column in a panel-row. This will be passed
 *   from the parent component.
 */
const PanelRow = ({component, columnWidths}) => {
  return (
    <Styled id="ConfiguratorPanelRow" css={css}>
      <div className="ConfiguratorPanelRow">
        {component &&
          component.components &&
          component.components.items &&
          component.components.items.map(item => {
            if (item.componentTypeCode && item.componentTypeCode.lookupCode === 'PANEL_COL') {
              const columnWidth = columnWidths && columnWidths.length && columnWidths[item.sequence - 1];

              return <PanelColumn key={item.id} component={item} columnWidth={columnWidth} />;
            }

            return null;
          })}
      </div>
    </Styled>
  );
};

PanelRow.propTypes = {
  /**
   * The component to be processed. This will be passed from the parent component.
   */
  component: PropTypes.shape({
    components: PropTypes.shape({
      items: PropTypes.arrayOf(Object)
    })
  }).isRequired,
  /**
   * The list of widths to be used for each panel-column in a panel-row. This will be passed
   * from the parent component.
   */
  columnWidths: PropTypes.arrayOf(PropTypes.object)
};

PanelRow.defaultProps = {
  columnWidths: undefined
};

export default PanelRow;
