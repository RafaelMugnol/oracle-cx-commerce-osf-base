/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {
  CollectionNavCardContext,
  CollectionNavContext
} from '@oracle-cx-commerce/react-widgets/category/collection-navigation/context';
import React, {useCallback, useContext} from 'react';

import BackIcon from '@oracle-cx-commerce/react-components/icons/back';

/**
 * Button to return to the root view
 * */
const BackToRootButton = () => {
  const {
    config: {labelMainMenu},
    closeChildCards
  } = useContext(CollectionNavContext);

  const {index, isVisible} = useContext(CollectionNavCardContext);

  const handleKeyDown = useCallback(e => {
    e.key === 'Enter' && e.target.click();
  }, []);

  return (
    <div className="CollectionNavigation__BackNavItem">
      {/* eslint-disable-next-line jsx-a11y/label-has-associated-control*/}
      <label
        onClick={closeChildCards}
        tabIndex={isVisible(index) ? 0 : -1}
        onKeyDown={handleKeyDown}
        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role
        role="button"
        aria-label={labelMainMenu}
      >
        <BackIcon className="CollectionNavigation__BackIcon" role="none" />
        <span aria-hidden="true">{labelMainMenu}</span>
      </label>
    </div>
  );
};

BackToRootButton.propTypes = {};

BackToRootButton.defaultProps = {};

export default BackToRootButton;
