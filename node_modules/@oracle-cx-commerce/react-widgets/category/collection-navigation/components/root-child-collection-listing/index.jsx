/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import React, {useContext} from 'react';

import ChildCategory from '@oracle-cx-commerce/react-widgets/category/collection-navigation/components/child-category';
import {CollectionNavCardContext} from '@oracle-cx-commerce/react-widgets/category/collection-navigation/context';
import {StoreContext} from '@oracle-cx-commerce/react-ui/contexts';
import {getCategories} from '@oracle-cx-commerce/commerce-utils/selector';

/**
 * Represents the root list of collections
 */
const RootChildCollectionListing = () => {
  const {
    category: {childCategories}
  } = useContext(CollectionNavCardContext);
  const store = useContext(StoreContext);

  const categories = getCategories(store.getState());

  return (
    <ul className="CollectionNavigation__Nav" role="menu">
      {childCategories.map(id => (
        <ChildCategory key={id} category={categories[id]} />
      ))}
    </ul>
  );
};

RootChildCollectionListing.propTypes = {};

RootChildCollectionListing.defaultProps = {};

export default React.memo(RootChildCollectionListing);
