/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {
  CollectionNavCardContext,
  CollectionNavContext
} from '@oracle-cx-commerce/react-widgets/category/collection-navigation/context';
import React, {useContext} from 'react';

import Link from '@oracle-cx-commerce/react-components/link';
import PropTypes from 'prop-types';

const MemoizedLink = React.memo(Link);

/**
 * Provides a link to open the collection
 */
const CategoryLink = ({category: {route, displayName}}) => {
  const {onNavigateToCategory} = useContext(CollectionNavContext);
  const {isVisible, index} = useContext(CollectionNavCardContext);

  return (
    <MemoizedLink href={route} onNavigate={onNavigateToCategory} tabIndex={isVisible(index) ? 0 : -1}>
      {displayName}
    </MemoizedLink>
  );
};

CategoryLink.propTypes = {
  /** An object representing a category in the catalog */
  category: PropTypes.shape({
    /** Name of the category */
    displayName: PropTypes.string.isRequired,
    /** Route of the category page */
    route: PropTypes.string.isRequired
  }).isRequired
};

CategoryLink.defaultProps = {};

export default CategoryLink;
