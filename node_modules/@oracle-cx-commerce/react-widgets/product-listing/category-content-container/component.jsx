/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {ContainerContext} from '@oracle-cx-commerce/react-ui/contexts';
import React from 'react';
import Region from '@oracle-cx-commerce/react-components/region';
import Styled from '@oracle-cx-commerce/react-components/styled';
import {connect} from '@oracle-cx-commerce/react-components/provider';
import css from '@oracle-cx-commerce/react-widgets/product-listing/category-content-container/styles.css';
import {getComponentData} from '@oracle-cx-commerce/react-widgets/product-listing/category-content-container/selectors';

/**
 * Container that holds all the widgets of the category content
 */
const CategoryContentContainer = props => {
  const {regions = [], ...categoryContentInformation} = props;

  return (
    <Styled id="CategoryContentContainer" css={css}>
      <div className="CategoryContentContainer">
        <ContainerContext.Provider value={{...categoryContentInformation}}>
          <section className="CategoryContentContainer__Section">
            {regions.map((regionId, index) => (
              /*
                    Using region ids as keys causes unnecessary DOM reconciliation.
 
                    https://reactjs.org/docs/reconciliation.html#keys
                  */
              // eslint-disable-next-line react/no-array-index-key
              <Region key={index} regionId={regionId} />
            ))}
          </section>
        </ContainerContext.Provider>
      </div>
    </Styled>
  );
};

export default connect(getComponentData)(CategoryContentContainer);
