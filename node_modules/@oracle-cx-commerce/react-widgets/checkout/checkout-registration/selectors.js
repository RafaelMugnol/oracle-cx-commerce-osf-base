/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {getOrder, isAuthenticated} from '@oracle-cx-commerce/commerce-utils/selector';
import {ContainerContext, StoreContext} from '@oracle-cx-commerce/react-ui/contexts';
import {useSelector} from '@oracle-cx-commerce/react-components/provider';
import {useContext} from 'react';

export const useComponentData = () => {
  const store = useContext(StoreContext);
  const {orderId = ''} = useContext(ContainerContext) || {};
  const authenticated = useSelector(isAuthenticated);
  // selectors
  if (orderId) {
    const orderDetails = getOrder(store.getState(), {id: orderId}) || {};
    const {billingAddress: {lastName = '', firstName = '', email = ''} = {}} = orderDetails;

    return {
      authenticated,
      firstName,
      lastName,
      email
    };
  }
};
