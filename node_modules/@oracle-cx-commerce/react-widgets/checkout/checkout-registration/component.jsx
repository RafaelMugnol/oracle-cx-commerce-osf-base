/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import React from 'react';
import Styled from '@oracle-cx-commerce/react-components/styled';
import ProfileRegistration from '@oracle-cx-commerce/react-widgets/profile/profile-registration/component';
import css from '@oracle-cx-commerce/react-widgets/checkout/checkout-registration/styles.css';
import {useComponentData} from '@oracle-cx-commerce/react-widgets/checkout/checkout-registration/selectors';

/**
 * Widget to display Checkout Registration Form
 * @param {props} component props
 */
const CheckoutRegistration = props => {
  //locales
  const {headingCheckoutRegistration, textCreateAnAccountHelper} = props;
  //selector values
  const {authenticated = true, firstName = '', lastName = '', email = ''} = useComponentData() || {};
  const REGISTRATION_REDIRECTION_PAGE = 'noredirect';

  return (
    <Styled id="CheckoutRegistration" css={css}>
      {!authenticated && (
        <div className="CheckoutRegistration">
          <h2>{headingCheckoutRegistration}</h2>
          <span>{textCreateAnAccountHelper}</span>
          <ProfileRegistration
            {...{firstName, lastName, email, defaultAutoLoginSuccessPage: REGISTRATION_REDIRECTION_PAGE, ...props}}
          />
        </div>
      )}
    </Styled>
  );
};

export default CheckoutRegistration;
