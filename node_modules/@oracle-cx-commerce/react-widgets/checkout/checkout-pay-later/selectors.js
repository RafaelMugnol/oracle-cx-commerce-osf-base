/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {
  isAuthenticated,
  getCurrentProfile,
  getCurrentOrder,
  getCurrentOrderId,
  getCurrentProfileId,
  isCurrentOrderScheduled
} from '@oracle-cx-commerce/commerce-utils/selector';

import {isPayLaterSelected} from '@oracle-cx-commerce/react-components/utils/payment';
/**
 * Returns widget's required data
 * @param {Object} state the state object
 * @returns required data
 */
export const getComponentData = state => {
  return {
    isApprovalEnabled: getCurrentProfile(state).derivedApprovalRequired,
    isPayAfterApprovalSelected: isPayLaterSelected(state),
    isUserLoggedIn: isAuthenticated(state) && getCurrentProfileId(state) !== 'anonymous',
    currentOrderId: getCurrentOrderId(state),
    currentOrder: getCurrentOrder(state),
    isScheduledCurrentOrder: isCurrentOrderScheduled(state)
  };
};
