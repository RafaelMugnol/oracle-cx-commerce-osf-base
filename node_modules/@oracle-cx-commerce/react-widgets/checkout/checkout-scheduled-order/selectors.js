/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {
  getCurrentProfileId,
  isAuthenticated,
  getCurrentOrderScheduleInfo,
  isCurrentUserB2B,
  getCurrentOrder,
  getPage,
  getOrder
} from '@oracle-cx-commerce/commerce-utils/selector';

export const getComponentData = state => {
  const isUserLoggedIn = isAuthenticated(state) && getCurrentProfileId(state) !== 'anonymous';
  const componentScheduleInfo = getCurrentOrderScheduleInfo(state);
  const contextOrderId = getPage(state).contextId;
  const currentOrder = contextOrderId ? getOrder(state, {id: contextOrderId}) : getCurrentOrder(state);
  const isB2BUser = isCurrentUserB2B(state);

  return {
    isUserLoggedIn,
    componentScheduleInfo,
    currentOrder,
    isB2BUser
  };
};
