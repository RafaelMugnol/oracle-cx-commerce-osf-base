/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import React from 'react';
import Stack from '@oracle-cx-commerce/react-components/stack';
import Widget from '@oracle-cx-commerce/react-components/widget';
import {connect} from '@oracle-cx-commerce/react-components/provider';
import {getRegion} from '@oracle-cx-commerce/commerce-utils/selector';

export const region = WrappedComponent => connect(getRegion)(WrappedComponent);

const Tab = props => {
  const {widgets = [], width = 12, displayName, structure, id} = props;

  // Allow for nested stacks
  return structure === 'stack' ? (
    <Stack key={id} stackId={id} />
  ) : (
    <section className={`Region col-${width}`}>
      <div>{displayName}</div>
      {widgets.map(widgetId => (
        <Widget key={widgetId} widgetId={widgetId} />
      ))}
    </section>
  );
};

Tab.Connected = region(Tab);

export default Tab.Connected;
