/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import React from 'react';
import Styled from '@oracle-cx-commerce/react-components/styled';
import css from '@oracle-cx-commerce/react-widgets/common/skip-to-content-button/styles.css';

/*
 * This widget is to focus on the first focusable element in the main div of the document
 */
const SkipToContentButton = props => {
  const {textSkipToContent} = props;

  const handleSkipToContent = () => {
    const mainDiv = document.querySelector('main');
    const focusableNode =
      mainDiv && mainDiv.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
    if (focusableNode) {
      document.activeElement.blur();
      focusableNode.focus();
    }
  };

  return (
    <Styled id="SkipToContentButton" css={css}>
      <div className="SkipToContentButton_Wrapper">
        <button type="button" onClick={handleSkipToContent} className="SkipToContentButton">
          {textSkipToContent}
        </button>
      </div>
    </Styled>
  );
};

export default SkipToContentButton;
