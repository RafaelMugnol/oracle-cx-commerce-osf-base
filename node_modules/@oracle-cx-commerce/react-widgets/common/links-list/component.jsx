/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import Link from '@oracle-cx-commerce/react-components/link';
import React from 'react';
import Styled from '@oracle-cx-commerce/react-components/styled';
import css from '@oracle-cx-commerce/react-widgets/common/links-list/styles.css';

/**
 * Following Widget LinksList will render the links according to the widget component settings.
 *
 * @param props
 */

const LinksList = props => {
  const {displayAndURL = '[]', linkBehavior = '_self', navigationOrientation = 'vertical'} = props;
  const links = JSON.parse(displayAndURL.replace(/'/g, '"'));

  const CreateLink = props => {
    const {href, children} = props;
    let linkProps;

    if (href) {
      linkProps = {...linkProps, href, title: children};
    }

    if (linkBehavior === '_self') {
      return <Link {...linkProps}>{children}</Link>;
    }
    linkProps = {...linkProps, target: linkBehavior};

    return <a {...linkProps}>{children}</a>;
  };

  return (
    <Styled id="LinksList" css={css}>
      <nav className="LinksList">
        <ul className={navigationOrientation === 'horizontal' ? 'LinksList__HorizontalDisplay' : ''}>
          {links.map(item => (
            <li key={item['0']}>
              <CreateLink href={item['1']}>{props[item['0']] || item['0']}</CreateLink>
            </li>
          ))}
        </ul>
      </nav>
    </Styled>
  );
};

export default LinksList;
