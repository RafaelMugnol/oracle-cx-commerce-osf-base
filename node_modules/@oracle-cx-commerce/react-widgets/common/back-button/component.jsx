/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import React from 'react';
import AngleDoubleLeftIcon from '@oracle-cx-commerce/react-components/icons/angle-double-left';
import Styled from '@oracle-cx-commerce/react-components/styled';
import {useSelector} from '@oracle-cx-commerce/react-components/provider';
import css from '@oracle-cx-commerce/react-widgets/common/back-button/styles.css';
import {getPages} from '@oracle-cx-commerce/commerce-utils/selector';

/**
 * Widget to return to the previous page
 * @param props
 */
const BackButton = props => {
  // resources
  const {actionBack, textPipeSymbol} = props;

  const pages = useSelector(getPages);
  const showBackButton = Object.keys(pages).length > 1 ? true : false;

  /**
   * Click handler function for the 'Back' button
   */
  const handleClick = () => {
    window.history.go(-1);
  };

  return (
    <Styled id="BackButton" css={css}>
      <div className="BackButton">
        {showBackButton && (
          <>
            <AngleDoubleLeftIcon />
            <button type="button" className="BackButton__button link" onClick={handleClick}>
              {actionBack}
            </button>
            <span className="BackButton__Separator">{textPipeSymbol}</span>
          </>
        )}
      </div>
    </Styled>
  );
};

export default BackButton;
