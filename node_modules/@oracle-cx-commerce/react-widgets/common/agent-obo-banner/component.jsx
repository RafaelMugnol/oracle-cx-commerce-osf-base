/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import React from 'react';
import Styled from '@oracle-cx-commerce/react-components/styled';
import {connect} from '@oracle-cx-commerce/react-components/provider';
import {getComponentData} from '@oracle-cx-commerce/react-widgets/common/agent-obo-banner/selectors';
import RedirectIcon from '@oracle-cx-commerce/react-components/icons/redirect';
import ActionIcon from '@oracle-cx-commerce/react-components/action-icon';
import Link from '@oracle-cx-commerce/react-components/link';
import css from '@oracle-cx-commerce/react-widgets/common/agent-obo-banner/styles.css';
import Img from '@oracle-cx-commerce/react-components/img';
import PropTypes from 'prop-types';

/**
 * Widget that displays the Agent OBO Banner.
 *
 * @param props
 */
const AgentOBOBanner = props => {
  const {oboRedirectUrl, profileName, textShoppingAs, labelRedirectToAgent} = props;
  const COMMERCE_CLOUD = 'Commerce Cloud';

  return (
    <Styled id="AgentOBOBanner" css={css}>
      {oboRedirectUrl && profileName && (
        <div className="AgentOBOBanner">
          <div className="AgentOBOBanner__brand">
            <Img src="/img/oracle_logo.svg" className="AgentOBOBanner__brandImage" alt="Oracle" useSrcset={false} />
            <span className="AgentOBOBanner__brandText">{COMMERCE_CLOUD}</span>
          </div>

          <div className="AgentOBOBanner__details">
            <div>
              <span className="AgentOBOBanner__shoppingText">{textShoppingAs}</span>
              <span className="AgentOBOBanner__profileName">{profileName}</span>
            </div>
            <ActionIcon>
              <Link href={oboRedirectUrl} ariaLabel={labelRedirectToAgent}>
                <RedirectIcon className="AgentOBOBanner__icon" />
              </Link>
            </ActionIcon>
          </div>
        </div>
      )}
    </Styled>
  );
};

AgentOBOBanner.propTypes = {
  /**
   * Agent redirection URL.
   */
  oboRedirectUrl: PropTypes.string,
  /**
   * Profile name of the user.
   */
  profileName: PropTypes.string
};

AgentOBOBanner.defaultProps = {
  oboRedirectUrl: undefined,
  profileName: undefined
};

export default connect(getComponentData)(AgentOBOBanner);
