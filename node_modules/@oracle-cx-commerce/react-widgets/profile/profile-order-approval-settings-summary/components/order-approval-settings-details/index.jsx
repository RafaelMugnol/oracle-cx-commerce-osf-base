/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import Card from '@oracle-cx-commerce/react-components/card';
import CheckIcon from '@oracle-cx-commerce/react-components/icons/check';
import Link from '@oracle-cx-commerce/react-components/link';
import MoneyBill from '@oracle-cx-commerce/react-components/icons/money-bill';
import {PAGE_ORDER_APPROVAL_SETTINGS_LINK} from '@oracle-cx-commerce/commerce-utils/constants';
import PropTypes from 'prop-types';
/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import React from 'react';
import Styled from '@oracle-cx-commerce/react-components/styled';
import TimesCross from '@oracle-cx-commerce/react-components/icons/times-cross';
import css from '@oracle-cx-commerce/react-widgets/profile/profile-order-approval-settings-summary/components/order-approval-settings-details/styles.css';

/**
 * Widget to display the orders approval settings summary details at profile page.
 * @param {Object} props the properties object
 */
const OrderApprovalSettingsDetails = props => {
  const {actionManage, textApprovalNotRequired, textApprovalRequired, textPurchaseLimit} = props;
  const {currentOrganization, currencyCode} = props;

  return (
    <Styled id="OrderApprovalSettingsDetails" css={css}>
      <div className="OrderApprovalSettingsDetails__Card">
        <Card>
          <div className="OrderApprovalSettingsDetails__ApprovalSettings">
            <div className="OrderApprovalSettingsDetails__RowItem">
              {currentOrganization && currentOrganization.approvalRequired ? (
                <>
                  <div className="OrderApprovalSettingsDetails__ApprovalIcon">
                    <CheckIcon />
                  </div>
                  <div className="OrderApprovalSettingsDetails__Content">{textApprovalRequired}</div>
                </>
              ) : (
                <>
                  <div className="OrderApprovalSettingsDetails__ApprovalIcon">
                    <TimesCross />
                  </div>
                  <div className="OrderApprovalSettingsDetails__Content">{textApprovalNotRequired}</div>
                </>
              )}
            </div>
            {currentOrganization && currentOrganization.approvalRequired ? (
              <div className="OrderApprovalSettingsDetails__RowItem">
                <div className="OrderApprovalSettingsDetails__PurchaseLimitIcon">
                  <MoneyBill />
                </div>
                <div className="OrderApprovalSettingsDetails__Content">
                  {textPurchaseLimit} {currentOrganization ? currentOrganization.orderPriceLimit : ''} {currencyCode}
                </div>
              </div>
            ) : (
              ''
            )}
          </div>
          <div className="OrderApprovalSettingsDetails__Manage">
            <Link href={PAGE_ORDER_APPROVAL_SETTINGS_LINK}>{actionManage}</Link>
          </div>
        </Card>
      </div>
    </Styled>
  );
};

OrderApprovalSettingsDetails.propTypes = {
  /** Total number of pending orders approval */
  currentOrganization: PropTypes.shape({
    repositoryId: PropTypes.string.isRequired,
    active: PropTypes.bool.isRequired
  }).isRequired,

  currencyCode: PropTypes.string.isRequired
};

export default OrderApprovalSettingsDetails;
