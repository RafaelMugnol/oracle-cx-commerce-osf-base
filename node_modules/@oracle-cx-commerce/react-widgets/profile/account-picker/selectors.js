/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {
  getCurrentOrgId,
  getOrganization,
  getOrganizations,
  isCurrentUserB2B
} from '@oracle-cx-commerce/commerce-utils/selector';

export const getComponentData = state => {
  const isUserLoggedIn = isCurrentUserB2B(state);
  const organizations = getOrganizations(state);
  const organizationLists = Object.keys(organizations).map(key => organizations[key]);
  // The global context is not set when the user logged in, so page refresh was required.
  // As a result, not using the currentOrgId from the global context.
  // const currentOrganizationId = getCurrentOrganizationId(state);
  const currentOrganizationId = getCurrentOrgId(state);
  const displayOrganizationSelector = organizationLists.length > 1 ? true : false;
  const {organizationLogoURL, name: organizationName} = getOrganization(state, {id: currentOrganizationId});

  return {
    isUserLoggedIn,
    currentOrganizationId,
    organizationLogoURL,
    organizationName,
    displayOrganizationSelector,
    organizationLists
  };
};
