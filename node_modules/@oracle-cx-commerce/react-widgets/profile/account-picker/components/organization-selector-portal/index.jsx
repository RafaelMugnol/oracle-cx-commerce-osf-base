/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import React, {useState, useCallback} from 'react';
import Styled from '@oracle-cx-commerce/react-components/styled';
import AccountDropdown from '@oracle-cx-commerce/react-widgets/profile/account-picker/components/account-dropdown';
import css from '@oracle-cx-commerce/react-widgets/profile/account-picker/components/organization-select-modal/styles.css';
import PropTypes from 'prop-types';

/**
 * This component is used to display the list of organization and search filter
 *
 * @param props
 */
const OrganizationSelectorPortal = props => {
  const {organizationLists, currentOrganizationId} = props;

  const [curOrgId, setCurOrgId] = useState(currentOrganizationId);

  const handleOrganizationChange = useCallback(value => {
    setCurOrgId(value);
  }, []);

  return (
    <Styled id="OrganizationSelectorPortal" css={css}>
      <AccountDropdown
        organizationLists={organizationLists}
        onOrganizationChange={handleOrganizationChange}
        currentOrganizationId={curOrgId}
        {...props}
      />
    </Styled>
  );
};

OrganizationSelectorPortal.propTypes = {
  /**
   * The current Organization id of the b2b user
   */
  currentOrganizationId: PropTypes.string.isRequired,
  /**
   * The organizationLists  object from redux state(ProfileRepository->organizations)
   */
  organizationLists: PropTypes.arrayOf(
    PropTypes.shape({
      /**
       * Organization Id
       */
      repositoryId: PropTypes.string.isRequired,
      /**
       * Used to indicate the name of the organization
       */
      name: PropTypes.string.isRequired
    })
  )
};

OrganizationSelectorPortal.defaultProps = {
  organizationLists: []
};

export default OrganizationSelectorPortal;
