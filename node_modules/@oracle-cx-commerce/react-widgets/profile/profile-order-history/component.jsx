/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import {connect} from '@oracle-cx-commerce/react-components/provider';
import Styled from '@oracle-cx-commerce/react-components/styled';
import React from 'react';
import {getProfileOrdersData} from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/selectors';
import css from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/styles.css';
import {Tab, TabContainer} from '@oracle-cx-commerce/react-components/tabs';
import ProfileOrderList from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/components/profile-order-list';
import {ORDER_TABS} from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/utils';

/**
 * A component for listing profile related orders with tabs.
 */
const ProfileOrderHistory = props => {
  const {headingOrderHistory, isUserLoggedIn, headingAllOrders, headingRequestedQuotes, CPQQuotingSettings} = props;
  const {ALL, QUOTED} = ORDER_TABS;
  const tabItems = [{header: headingAllOrders, orderType: ALL}];
  if (CPQQuotingSettings.enabled) {
    tabItems.push({header: headingRequestedQuotes, orderType: QUOTED});
  }

  return (
    <Styled id="ProfileOrderHistory" css={css}>
      <div className="ProfileOrderHistory">
        <h1 className="ProfileOrderHistory__Title">{headingOrderHistory}</h1>
        {isUserLoggedIn && (
          <div className="ProfileOrderHistory__TabWrapper">
            <TabContainer>
              {tabItems.map(item => {
                return (
                  <Tab header={item.header} key={item.orderType}>
                    <ProfileOrderList orderType={item.orderType} {...props}></ProfileOrderList>
                  </Tab>
                );
              })}
            </TabContainer>
          </div>
        )}
      </div>
    </Styled>
  );
};

export default connect(getProfileOrdersData)(ProfileOrderHistory);
