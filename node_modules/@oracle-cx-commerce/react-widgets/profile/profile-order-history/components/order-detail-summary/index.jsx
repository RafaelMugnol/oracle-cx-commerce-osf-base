/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import Styled from '@oracle-cx-commerce/react-components/styled';
import React from 'react';
import {isEmptyObject} from '@oracle-cx-commerce/utils/generic';
import {useDateFormatter, useNumberFormatter} from '@oracle-cx-commerce/react-components/utils/hooks';
import css from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/components/order-detail-summary/styles.css';
import {ORDER_STATE_MESSAGES} from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/utils';

const OrderDetailSummary = props => {
  const {order} = props;
  const formatCurrency = useNumberFormatter({style: 'currency'}, props.order.priceListGroup);
  const formatDate = useDateFormatter();
  const orderedDate = order.state === 'SUBMITTED' ? order.submittedDate : order.creationDate;

  return (
    <Styled id="OrderDetailSummary" css={css}>
      {!isEmptyObject(order) && (
        <div className="OrderDetailSummary">
          <div className="OrderDetailSummary__Container">
            <div className="OrderDetailSummary__Label">{props.labelStatus}</div>
            <div className="OrderDetailSummary__Value">{order.state && props[ORDER_STATE_MESSAGES[order.state]]}</div>
          </div>
          <div className="OrderDetailSummary__Container">
            <div className="OrderDetailSummary__Label">{props.labelOrderNumber}</div>
            <div className="OrderDetailSummary__Value">{order.id}</div>
          </div>
          <div className="OrderDetailSummary__Container">
            <div className="OrderDetailSummary__Label">{props.labelTotalCost}</div>
            <div className="OrderDetailSummary__Value">{order.total && formatCurrency(order.total)}</div>
          </div>
          {orderedDate && (
            <div className="OrderDetailSummary__Container">
              <div className="OrderDetailSummary__Label">{props.labelOrderDate}</div>
              <div className="OrderDetailSummary__Value">{formatDate(new Date(orderedDate))}</div>
            </div>
          )}
        </div>
      )}
    </Styled>
  );
};

export default OrderDetailSummary;
