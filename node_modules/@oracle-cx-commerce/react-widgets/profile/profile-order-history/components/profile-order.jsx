/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import OrderDetailSummary from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/components/order-detail-summary';
import {OrderThumbnailImages} from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/components/order-thumbnail-images';
import {PAGE_ORDER_DETAILS_LINK} from '@oracle-cx-commerce/commerce-utils/constants';
import {ProgressTacker} from '@oracle-cx-commerce/react-widgets/profile/profile-order-history/components/progress-tracker';
import React from 'react';
import {getOrder} from '@oracle-cx-commerce/commerce-utils/selector';
import {isEmptyObject} from '@oracle-cx-commerce/utils/generic';
import {useNavigator} from '@oracle-cx-commerce/react-components/link';
import {useSelector} from '@oracle-cx-commerce/react-components/provider';

const ProfileOrder = props => {
  const {orderId} = props;
  const order = useSelector(getOrder, {id: orderId}) || {};
  const goToPage = useNavigator();

  return (
    <>
      {!isEmptyObject(order) && (
        <div
          onClick={() => goToPage(`${PAGE_ORDER_DETAILS_LINK}/${orderId}`)}
          onKeyPress={event => (event.key === 'Enter' ? goToPage(`${PAGE_ORDER_DETAILS_LINK}/${orderId}`) : '')}
          role="button"
          tabIndex="0"
        >
          {props.displayThumbnails && order.commerceItems && (
            <OrderThumbnailImages commerceItems={order.commerceItems} textAddtionSymbol={props.textAddtionSymbol} />
          )}

          {props.displayStatusBar && order.state && <ProgressTacker state={order.state} />}

          <OrderDetailSummary {...props} order={order} />
        </div>
      )}
    </>
  );
};

export default ProfileOrder;
