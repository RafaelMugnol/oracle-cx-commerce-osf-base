/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import React, {useState} from 'react';
import Dropdown from '@oracle-cx-commerce/react-components/dropdown';
import DropdownArrowIcon from '@oracle-cx-commerce/react-components/icons/dropdown-arrow';
import Styled from '@oracle-cx-commerce/react-components/styled';
import css from '@oracle-cx-commerce/react-widgets/profile/contact-registration-requests/components/registration-sort/styles.css';
import PropTypes from 'prop-types';

/**
 * This component is used to display the various sort params. It enables to sort the
 * result based on each param selected in the drop-down.
 * @param {*} props
 */
const RegistrationSort = props => {
  const {onSortCriteriaChange, defaultSortProperty, labelAriaSortText} = props;

  const [sortCriteria, setSortCriteria] = useState(defaultSortProperty);

  const handleValueChange = selectValue => {
    setSortCriteria(selectValue);
    onSortCriteriaChange(selectValue);
  };

  const sortByLists = [
    {id: 1, value: 'createdTime:desc', name: props.textRequestDateNewest},
    {id: 2, value: 'createdTime:asc', name: props.textRequestDateOldest},
    {id: 3, value: 'profile.firstName:asc', name: props.textFirstNameAsc},
    {id: 4, value: 'profile.firstName:desc', name: props.textFirstNameDesc},
    {id: 5, value: 'profile.lastName:asc', name: props.textLastNameAsc},
    {id: 6, value: 'profile.lastName:desc', name: props.textLastNameDesc},
    {id: 7, value: 'profile.email:asc', name: props.textEmailAsc},
    {id: 8, value: 'profile.email:desc', name: props.textEmailDesc},
    {id: 9, value: 'id:asc', name: props.textRequestIDAsc},
    {id: 10, value: 'id:desc', name: props.textRequestIdDesc},
    {id: 11, value: 'status:asc', name: props.textStatusAsc},
    {id: 12, value: 'status:desc', name: props.textStatusDesc}
  ];

  return (
    <Styled id="RegistrationSort" css={css}>
      <Dropdown
        className={'RegistrationSortSelect__DropDown'}
        onChange={e => handleValueChange(e.target.value)}
        value={sortCriteria}
        aria-label={labelAriaSortText}
        dataTestId="sort-select"
        id="sort-select"
        name="registrationSort"
        icon={<DropdownArrowIcon className="RegistrationSortSelect__DropDown"></DropdownArrowIcon>}
      >
        {sortByLists.map(sortByList => (
          <option key={sortByList.id} value={sortByList.value}>
            {sortByList.name}
          </option>
        ))}
      </Dropdown>
    </Styled>
  );
};

RegistrationSort.propTypes = {
  /**
   * A callback function to handle the change in drop-down value
   */
  onSortCriteriaChange: PropTypes.func.isRequired,
  /**
   * The default sort property value
   */
  defaultSortProperty: PropTypes.string
};

RegistrationSort.defaultProps = {
  defaultSortProperty: 'createdTime:desc'
};

export default React.memo(RegistrationSort);
