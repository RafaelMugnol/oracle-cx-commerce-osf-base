/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import Card from '@oracle-cx-commerce/react-components/card';
import {PAGE_CONTACT_REQUEST_LINK} from '@oracle-cx-commerce/commerce-utils/constants';
import PropTypes from 'prop-types';
import React from 'react';
import RegistrationRequestSummary from '@oracle-cx-commerce/react-widgets/profile/contact-registration-requests/components/registration-request-summary';
import Styled from '@oracle-cx-commerce/react-components/styled';
import css from '@oracle-cx-commerce/react-widgets/profile/contact-registration-requests/components/contact-request/styles.css';
import {getContactRequest} from '@oracle-cx-commerce/commerce-utils/selector';
import {isEmptyObject} from '@oracle-cx-commerce/utils/generic';
import {useNavigator} from '@oracle-cx-commerce/react-components/link';
import {useSelector} from '@oracle-cx-commerce/react-components/provider';
/**
 * This component is used to redirect to the contact registration request details
 * page.
 * @param {*} props
 */
const ContactRequest = props => {
  const {itemId} = props;
  const contactRequest = useSelector(getContactRequest, {id: itemId}) || {};
  const goToPage = useNavigator();

  return (
    <Styled id="ContactRequest" css={css}>
      {!isEmptyObject(contactRequest) && (
        <Card key={itemId} id={itemId} className="ContactRequestDisplay__Card">
          <div
            onClick={() => goToPage(`${PAGE_CONTACT_REQUEST_LINK}/${itemId}`)}
            onKeyPress={event => (event.key === 'Enter' ? goToPage(`${PAGE_CONTACT_REQUEST_LINK}/${itemId}`) : '')}
            role="button"
            tabIndex="0"
          >
            <RegistrationRequestSummary {...props} contactRequest={contactRequest} />
          </div>
        </Card>
      )}
    </Styled>
  );
};

ContactRequest.propTypes = {
  /**
   * The contact request id
   */
  itemId: PropTypes.string.isRequired
};

export default ContactRequest;
