/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import React, {useState} from 'react';
import Dropdown from '@oracle-cx-commerce/react-components/dropdown';
import DropdownArrowIcon from '@oracle-cx-commerce/react-components/icons/dropdown-arrow';
import SlidersIcon from '@oracle-cx-commerce/react-components/icons/sliders';
import Styled from '@oracle-cx-commerce/react-components/styled';
import css from '@oracle-cx-commerce/react-widgets/profile/contact-registration-requests/components/registration-status-select/styles.css';
import PropTypes from 'prop-types';

/**
 * This component displays the drop-down with various registration status
 * Allows to filter based on selection of one of the statues
 *
 * @param {*} props
 */
const RegistrationStatusSelect = props => {
  const {onSearchTermChange, labelAriaFilterText} = props;

  const [selectedRegistrationStatus, setSelectedRegistrationStatus] = useState('all');

  const registrationStatuses = [
    {id: 1, value: '', name: props.textAllStatuses},
    {id: 2, value: 'new', name: props.textRegistrationRequestsNew},
    {id: 3, value: 'review', name: props.textRegistrationRequestsReview},
    {id: 4, value: 'rejected', name: props.textRegistrationRequestRejected},
    {id: 5, value: 'moreInfoNeeded', name: props.textMoreInfoRequired}
  ];

  const onChange = event => {
    setSelectedRegistrationStatus(event.target.value);
    onSearchTermChange(event.target.value);
  };

  return (
    <Styled id="RegistrationStatusSelect" css={css}>
      <Dropdown
        className={'RegistrationStatusSelect__DropDown'}
        id="status-selector"
        onChange={onChange}
        value={selectedRegistrationStatus}
        aria-label={labelAriaFilterText}
        dataTestId="status-selector"
        name="registrationStatusSelect"
        icon={
          <div>
            <div className="RegistrationStatusSelect__SliderIconContainer">
              <SlidersIcon className="RegistrationStatusSelect__SliderIcon"></SlidersIcon>
            </div>
            <div className="RegistrationStatusSelect__ArrowIconContainer">
              <DropdownArrowIcon className="RegistrationStatusSelect__DownArrowIcon"></DropdownArrowIcon>
            </div>
          </div>
        }
      >
        {registrationStatuses.map(registrationStatus => (
          <option key={registrationStatus.id} value={registrationStatus.value}>
            {registrationStatus.name}
          </option>
        ))}
      </Dropdown>
    </Styled>
  );
};

RegistrationStatusSelect.propTypes = {
  /**
   * A call back function which gets invoked when any value is selected from the drop-down.
   */
  onSearchTermChange: PropTypes.func.isRequired
};

export default React.memo(RegistrationStatusSelect);
