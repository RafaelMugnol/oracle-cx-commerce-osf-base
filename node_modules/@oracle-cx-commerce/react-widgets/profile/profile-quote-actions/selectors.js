/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import {getCurrentOrder, getPage, getOrder} from '@oracle-cx-commerce/commerce-utils/selector';

export const getComponentData = state => {
  const contextOrderId = getPage(state).contextId;
  const currentOrder = contextOrderId ? getOrder(state, {id: contextOrderId}) : getCurrentOrder(state);
  let quoteValid = true;
  if (currentOrder && currentOrder.quoteInfo && currentOrder.quoteInfo.expirationDate) {
    quoteValid = new Date(currentOrder.quoteInfo.expirationDate) > new Date();
  }

  return {
    currentOrder,
    quoteValid
  };
};
