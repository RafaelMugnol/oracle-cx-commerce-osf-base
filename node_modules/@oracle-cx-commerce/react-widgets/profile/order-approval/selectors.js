/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {getProfile, isAuthenticated, getRoles} from '@oracle-cx-commerce/commerce-utils/selector';

import {APPROVER} from '@oracle-cx-commerce/commerce-utils/constants/roles';

/*
 ** get the user profile data
 */
export const getProfileData = state => {
  const isUserLoggedIn = isAuthenticated(state);
  const roles = getRoles(state);
  const profile = getProfile(state);

  const isApprover =
    profile.roles !== undefined &&
    profile.roles !== null &&
    profile.roles.find(roleId => {
      return roles[roleId].function === APPROVER;
    }) !== undefined
      ? true
      : false;

  return {
    ...profile,
    isApprover,
    isUserLoggedIn
  };
};
