/*
 ** Copyright (c) 2021 Oracle and/or its affiliates.
 */
import {getLinkTagsForPage} from '@oracle-cx-commerce/commerce-utils/links';
import {getEmptyString} from '@oracle-cx-commerce/utils/generic';
import {getSite} from '@oracle-cx-commerce/commerce-utils/selector';

/**
 * Adds Link tags to the page during server side rendering
 */
export default (req, res) => {
  const {link = getEmptyString} = res.app.locals.indexHtml || {};

  const {state} = res.locals;

  const {favicon} = getSite(state);

  let html = '';

  if (favicon) {
    html += `<link rel="icon" href="${favicon}">`;
  }

  html += getLinkTagsForPage({
    req,
    state
  });

  html += link(req, res);

  return html;
};
