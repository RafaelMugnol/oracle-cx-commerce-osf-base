/*
 ** Copyright (c) 2021 Oracle and/or its affiliates.
 */

import {getGlobalContext} from '@oracle-cx-commerce/commerce-utils/selector';
import {getEmptyString} from '@oracle-cx-commerce/utils/generic';

export default (req, res) => {
  const {meta = getEmptyString} = res.app.locals.indexHtml || {};

  const {state, page} = res.locals;

  const {baseURI} = getGlobalContext(state);

  const {metadata = {}} = page;

  const {description, title} = metadata;

  return `<meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>${title}</title><meta name="description" content="${description}"><meta name="viewport" content="width=device-width,initial-scale=1"><base href="${baseURI}">${meta(
    req,
    res
  )}`;
};
