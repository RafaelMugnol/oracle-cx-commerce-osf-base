{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "id": "https://cloud.oracle.com/commerce-cloud/storefront/schemas/store-profile/listSiteProperties/output.json",
  "title": "List Site Properties",
  "description": "Gets the list of all the site based properties for the current profile.",
  "type": "object",
  "properties": {
    "profileRepository": {
      "type": "object",
      "description": "The Profile Repository",
      "properties": {
        "siteProperties": {
          "type": "object",
          "description": "The list of site related properties for the profile id.",
          "patternProperties": {
            "^[a-zA-Z1-9]+$": {
              "description": "The profile id.",
              "type": "object",
              "properties": {
                "sites": {
                  "description": "The site properties for each site, for the user",
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "description": "The id of the site",
                        "type": "string"
                      },
                      "receiveEmail": {
                        "description": "Indicates whether the user should receive marketing emails on the current site. Can be yes or no.",
                        "type": "string"
                      },
                      "GDPRProfileP13nConsentGranted": {
                        "description": "Indicates whether the user has given GDPR Profile P13n consent on the current site. Can be true or false.",
                        "type": "boolean"
                      },
                      "numberOfVisits": {
                        "description": "The number of times the user has visited the site",
                        "type": "integer"
                      },
                      "GDPRProfileP13nConsentDate": {
                        "description": "The date on which GDPR personalization consent was granted by the user.",
                        "type": "string"
                      },
                      "receiveEmailDate": {
                        "description": "The date on which email marketing consent was granted by the user.",
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "error": {
      "$ref": "@oracle-cx-commerce/endpoints/references/error.json#/error"
    }
  },
  "example": {
    "profileRepository": {
      "siteProperties": {
        "123456": {
          "receiveEmailGlobal": true,
          "GDPRProfileP13nConsentGrantedGlobal": false,
          "sites": [
            {
              "id": 10001,
              "GDPRProfileP13nConsentDate": "2019-03-08T13:31:54.000Z",
              "GDPRProfileP13nConsentGranted": true,
              "numberOfVisits": 0,
              "receiveEmail": "yes",
              "receiveEmailDate": "2019-03-12T12:25:04.000Z"
            },
            {
              "id": 10002,
              "GDPRProfileP13nConsentDate": "2019-02-08T13:31:54.000Z",
              "GDPRProfileP13nConsentGranted": false,
              "numberOfVisits": 0,
              "receiveEmail": "yes",
              "receiveEmailDate": "2019-03-12T12:25:04.000Z"
            }
          ]
        }
      }
    },
    "error": {
      "errorCode": "1000500",
      "message": "Invalid input",
      "status": "500"
    }
  }
}