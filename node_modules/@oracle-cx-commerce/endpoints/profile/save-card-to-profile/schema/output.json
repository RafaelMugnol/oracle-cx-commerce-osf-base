{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "id": "https://cloud.oracle.com/commerce-cloud/storefront/schemas/wapi-profile/saveCardToProfile/output.json",
  "type": "object",
  "title": "Save card",
  "description": "Following model is returned when operation succeeds.",
  "properties": {
    "profileRepository": {
      "type": "object",
      "description": "Profile Repository.",
      "properties": {
        "savedCards": {
          "type": "object",
          "description": "Saved Cards Object",
          "patternProperties": {
            "^[a-zA-Z1-9]+$": {
              "type": "object",
              "description": "Current shopper profile id.",
              "properties": {
                "savedCardsMap": {
                  "type": "object",
                  "description": "Saved cards map. Each card is mapped against its savedCardId. This map will be reloaded on invocation of action: 'listProfileSavedCards'",
                  "patternProperties": {
                    "^[a-zA-Z1-9]+$": {
                      "description": "savedCardId of saved card",
                      "type": "object",
                      "properties": {
                        "savedCardId": {
                          "description": "The card id for the saved card.",
                          "type": "string"
                        },
                        "hasExpired": {
                          "description": "The flag that indicates if the card can be used or it has expired.",
                          "type": "boolean"
                        },
                        "isDefault": {
                          "description": "The flag that indicates if the card is the default card for the current user.",
                          "type": "boolean"
                        },
                        "customPaymentProperties": {
                          "type": "object",
                          "description": "The set of properties returned by the generic payment webhook.",
                          "properties": {}
                        },
                        "nameOnCard": {
                          "description": "Name on the card.",
                          "type": "string"
                        },
                        "repositoryId": {
                          "description": "Repository id for card. 'saveCardToProfile' endpoint's output does not include it.",
                          "type": "string"
                        },
                        "expiryMonth": {
                          "description": "Card expiry month.",
                          "type": "string"
                        },
                        "cardType": {
                          "description": "Card type. e.g. visa.",
                          "type": "string"
                        },
                        "nickname": {
                          "description": "The nick name for the card.",
                          "type": "string"
                        },
                        "expiryYear": {
                          "description": "Card expiry year.",
                          "type": "string"
                        },
                        "cardNumber": {
                          "description": "Card number.",
                          "type": "string"
                        },
                        "iin": {
                          "description": "The issuer identification number for the card.",
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "profileSavedCardIds": {
                  "type": "array",
                  "description": "List of savedCardIds of saved cards applicable to profile page. This list will be reloaded on invocation of action: 'listProfileSavedCards'. It will not change on invocation of action:'listProfileSavedCardsForCurrentSite'"
                },
                "currentSiteSavedCardIds": {
                  "type": "array",
                  "description": "List of savedCardIds of saved cards present in current site for the profile. This list will be added/updated only on invocation of action: 'listProfileSavedCardsForCurrentSite'"
                }
              }
            }
          }
        }
      }
    },
    "error": {
      "$ref": "@oracle-cx-commerce/endpoints/references/error.json#/error"
    },
    "example": {
      "profileRepository": {
        "savedCards": {
          "se-570031": {
            "savedCardsMap": {
              "usercc10001": {
                "savedCardId": "usercc10001",
                "hasExpired": false,
                "isDefault": false,
                "customPaymentProperties": {
                  "addl-prop4": "addl-prop4",
                  "addl-prop3": "addl-prop3",
                  "addl-prop1": "addl-prop1",
                  "decision": null,
                  "reasonCode": null
                },
                "nameOnCard": "card1",
                "repositoryId": "usercc10001",
                "expiryMonth": "04",
                "cardType": "visa",
                "nickname": "visa - 1111",
                "expiryYear": "2021",
                "cardNumber": "xxxxxxxxxxxx1111",
                "iin": "411111"
              }
            },
            "profileSavedCardIds": [
              "usercc10001"
            ],
            "currentSiteSavedCardIds": []
          }
        }
      }
    }
  }
}
