/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */
import {isEmptyObject, isObject, arrayToMap} from '@oracle-cx-commerce/utils/generic';

/**
 * This method transforms contact request items array into contact map.
 * It maps contact request details with contactRequestId and stored to profileRepository:contactRequests
 *
 * @param {Array} items - Array of contact request objects containing profile and organization details.
 * @returns {Object} - Contact request Map where request details are mapped to corresponding request id.
 */
export const transformContactRequests = items => {
  if (!Array.isArray(items)) return {};
  const contactRequestMap = arrayToMap(items, 'id');

  return {
    profileRepository: {
      contactRequests: {...contactRequestMap}
    }
  };
};

/**
 * This method transforms contact request item to corresponding map
 * The contact request item will be updated to state if exists or adds current item to state
 *
 * @param {Object} item - Contact request object containing profile and organization details.
 * @returns {Object} - Contact request Map made part of profileRepository:contactRequests state structure.
 */
export const transformContactRequest = item => {
  if (!isObject(item) || isEmptyObject(item)) {
    return {};
  }
  const contactRequestMap = {};
  contactRequestMap[item.id] = {...item};

  return {
    profileRepository: {
      contactRequests: {...contactRequestMap}
    }
  };
};
