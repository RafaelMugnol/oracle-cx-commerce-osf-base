/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import {createEndpoint, getBodyAsJson} from '@oracle-cx-commerce/endpoints/factory';
import {populateError} from '@oracle-cx-commerce/endpoints/utils';

/**
 * Endpoint adapter for the 'calculateRemainingBalance' action.
 * This maps the action to an 'calculateRemainingBalance' endpoint invocation.
 */
export default createEndpoint('calculateRemainingBalance', {
  processInput(payload) {
    console.assert(payload.orderId, 'Missing argument orderId in payload for endpoint "calculateRemainingBalance"');

    return {
      body: payload
    };
  },

  /**
   * Return the response given by the endpoint on success or failure
   */
  async processOutput(response) {
    const json = await getBodyAsJson(response);

    return response.ok ? {json} : populateError(response, json);
  }
});
