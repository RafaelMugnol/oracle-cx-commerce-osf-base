/*
 ** Copyright (c) 2020 Oracle and/or its affiliates.
 */

import alias from '../alias';

test('alias is a function', () => {
  expect(typeof alias).toBe('function');
});

test('alias().name === "alias"', () => {
  expect(alias().name).toBe('alias');
});

test('alias().resolveId() throws an error', () => {
  expect(() => alias().resolveId()).toThrow();
});

test('alias({}).resolveId() === undefined', () => {
  expect(alias({}).resolveId()).toBeUndefined();
});

test('alias({postcss: "invalid-package-name"}).resolveId("postcss") thows an error', () => {
  expect(() => alias({postcss: 'invalid-package-name'}).resolveId('postcss')).toThrow();
});

test('alias({postcss: "rollup"}).resolveId("postcss") ≈ "rollup.js"', () => {
  expect(alias({postcss: 'rollup'}).resolveId('postcss')).toContain('rollup.js');
});

test('alias({postcss: "./rollup.js"}).resolveId("postcss", <missing arg>) throws an error', () => {
  expect(() => alias({postcss: './rollup.js'}).resolveId('postcss')).toThrow();
});

// eslint-disable-next-line no-template-curly-in-string
test('alias({postcss: "./rollup.js"}).resolveId("postcss", "${__dirname}importer.js") ≈ "rollup.js"', () => {
  expect(alias({postcss: './rollup.js'}).resolveId('postcss', `${__dirname}importer.js`)).toContain('rollup.js');
});
