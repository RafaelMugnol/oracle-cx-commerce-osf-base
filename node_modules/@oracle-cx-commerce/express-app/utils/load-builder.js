/*
 ** Copyright (c) 2021 Oracle and/or its affiliates.
 */

const {createBuilder} = require('@oracle-cx-commerce/builder/esbuild');
//const logger = require('@oracle-cx-commerce/logger/server');

const loadBuilder = async (appDir, options) => {
  const builder = createBuilder({...options, appDir, watch: true});

  const [clientBuild, serverBuild] = await builder.build();

  const packageJson = require(`${appDir}/package.json`);

  return {
    serverBuild,
    clientBuild,
    packageJson
  };
};

module.exports = {loadBuilder};
